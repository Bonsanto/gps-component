<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
	<title></title>
	<script src="dist/gpscomp.js"></script>
</head>
<body>
<button onclick="flip()">FLIP</button>
<p> try with 38.889803,-77.009114</p>
<input type="number" placeholder="latitude"/>
<input type="number" placeholder="longitude"/>
<button onclick="redraw()" style="left: 100px; top:1000px">Change place</button>
<br/>
<br/>

<p>Add a new marker. Please write the longitude and latitude</p>
<input type="number" placeholder="latitude"/>
<input type="number" placeholder="longitude"/>
<button onclick="newMarker()" style="left: 100px; top:700px">Add Marker</button>
<br/>
<br/>

<p>Calculate distance between markers (you have to add all latitudes and longitudes
in the inputs)</p>
<button onclick="calcDistance()" style="left: 100px; top:500px">Calculate</button>
<br/>
<br/>

<x-map style="width: 300px; height: 300px" zoom="7"></x-map>
<script>
	var flip = function () {
		var pic = document.querySelector("x-map");
		pic.hidden = !pic.hidden;
	};

	var redraw = function () {
		var lat = document.querySelectorAll("input")[0].value;
		var lon = document.querySelectorAll("input")[1].value;
		document.querySelector("x-map").setLocation(lat, lon);
	};

	var newMarker = function(){
		var lat = document.querySelectorAll("input")[2].value;
		var lon = document.querySelectorAll("input")[3].value;
		document.querySelector("x-map").newMarker(lat,lon);
	};

	var calcDistance = function(){
		var lat1 = parseFloat(document.querySelectorAll("input")[0].value);
		var lon1 = parseFloat(document.querySelectorAll("input")[1].value);
		var lat2 = parseFloat(document.querySelectorAll("input")[2].value);
		var lon2 = parseFloat(document.querySelectorAll("input")[3].value);

		var R = 6371; // km
		var dLat = (lat2 - lat1).toRad();
		var dLon = (lon2 - lon1).toRad();
		var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
				Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) *
				Math.sin(dLon / 2) * Math.sin(dLon / 2);
		var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
		var d = R * c;
		alert(d.toFixed(4)+" kilometers");
	};
		Number.prototype.toRad = function() {
			return this * Math.PI / 180;
	};


</script>
</body>
</html>